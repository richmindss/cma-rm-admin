(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{fhuC:function(e,t,n){"use strict";n.r(t),n.d(t,"PaymentModule",(function(){return Y}));var r=n("ofXK"),a=n("tyNb"),i=n("M0ag"),o=n("fXoL"),l=n("tPYN"),s=n("WODz"),d=n("eo5q"),c=n("SxV6"),m=n("3Pt+"),p=n("NhFE");function u(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.error," ")}}function x(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",16),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275propertyInterpolate"]("value",e._id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.exam_name)}}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",17),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function h(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",18),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275text"](2," No Records Found "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275elementStart"](8,"button",22),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).onVerify(n)})),o["\u0275\u0275text"](9,"Verify"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate4"]("",e.userdetail.title.name," ",e.userdetail.firstname," ",e.userdetail.middlename," ",e.userdetail.lastname,""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.userdetail.emailid),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.statuscode),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngbTooltip",n.Verify)}}function g(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",18),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"table",19),o["\u0275\u0275elementStart"](3,"thead"),o["\u0275\u0275elementStart"](4,"tr"),o["\u0275\u0275elementStart"](5,"th",20),o["\u0275\u0275text"](6,"Candidate Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"th",20),o["\u0275\u0275text"](8,"Email"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"th",20),o["\u0275\u0275text"](10,"Status"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"th"),o["\u0275\u0275text"](12,"Action"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,v,10,7,"tr",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](13),o["\u0275\u0275property"]("ngForOf",e.searchResult)}}function S(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"app-pagination",23),o["\u0275\u0275listener"]("currentPageChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().currentPage=t}))("pageChanged",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().fetchStatusData(t)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("currentPage",e.currentPage)("pageSize",e.pageSize)("totalRecords",e.statusCount)}}let E=(()=>{class e{constructor(e,t,n,r,a){this.router=e,this.paymentVerificationListService=t,this.constantApi=n,this.registrationReportApi=r,this.applicationVerificationService=a,this.verificationStatus=[],this.examlist=[],this.examid="",this.filter={key:""},this.pageSize=25,this.currentPage=1,this.statusCount=0}ngOnInit(){this.getstatus(),this.getApplication()}onSearch(){return this.error="",this.status?this.examid?void this.paymentVerificationListService.getPaymentStatus(this.status,this.examid,this.currentPage,this.pageSize,this.filter).pipe(Object(c.a)()).subscribe(e=>{e&&(this.searchResult=e.finalResult,this.statusCount=e.count)}):(this.error="Please select   Exam",!1):(this.error="Please select   Payment Status",!1)}fetchStatusData(e){this.currentPage=e,this.onSearch()}getstatus(){this.constantApi.getConstantValue("STATUSCODE").pipe(Object(c.a)()).subscribe(e=>{e&&(this.statusResult=e)})}getApplication(){this.applicationVerificationService.getApplication().pipe(Object(c.a)()).subscribe(e=>{e&&(this.verificationStatus=e,this.getExam())})}getExam(){this.registrationReportApi.getExam().pipe(Object(c.a)()).subscribe(e=>{this.exam=e,this.examid=this.exam._id,this.examlist=this.exam})}onVerify(e){this.router.navigate(["admin/payments/"+e.examid+"/users/"+e.userid])}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.b),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](i.c))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-payment-verification-list"]],decls:30,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card","p-12"],[1,"card-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"col-md-4"],["name","exam",1,"custom-select",3,"ngModel","ngModelChange"],["disabled","","selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["name","payment",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-4","space-margin"],["type","search",1,"btn","btn-success",3,"click"],["class","row space-margin",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"value"],[3,"ngValue"],[1,"row","space-margin"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","title","Verify",1,"btn","btn-danger","btn-xs",3,"ngbTooltip","click"],[3,"currentPage","pageSize","totalRecords","currentPageChange","pageChanged"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h2"),o["\u0275\u0275text"](3,"Payment Verification List"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"div",0),o["\u0275\u0275elementStart"](7,"div",1),o["\u0275\u0275template"](8,u,2,1,"div",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",0),o["\u0275\u0275elementStart"](10,"div",5),o["\u0275\u0275elementStart"](11,"label"),o["\u0275\u0275text"](12,"Exam Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"select",6),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.examid=e})),o["\u0275\u0275elementStart"](14,"option",7),o["\u0275\u0275text"](15," Please select Exam"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,x,2,2,"option",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",5),o["\u0275\u0275elementStart"](18,"label"),o["\u0275\u0275text"](19,"Select Payment Status"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"select",9),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.status=e})),o["\u0275\u0275elementStart"](21,"option",7),o["\u0275\u0275text"](22," Please select payment Status"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](23,f,2,2,"option",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",11),o["\u0275\u0275elementStart"](25,"button",12),o["\u0275\u0275listener"]("click",(function(){return t.onSearch()})),o["\u0275\u0275text"](26,"\xa0Search"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](27,h,3,0,"div",13),o["\u0275\u0275template"](28,g,14,1,"div",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](29,S,3,3,"div",14)),2&e&&(o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngIf",t.error),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.examid),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngValue",void 0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.examlist),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.status),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngValue",void 0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.statusResult),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.searchResult&&0==t.searchResult.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.searchResult&&t.searchResult.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.searchResult&&t.searchResult.length>25))},directives:[r.NgIf,m.v,m.j,m.m,m.o,m.x,r.NgForOf,p.a],styles:[".space-margin[_ngcontent-%COMP%]{margin-top:30px}"]}),e})(),I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pay-veri-main"]],decls:1,vars:0,template:function(e,t){1&e&&o["\u0275\u0275element"](0,"app-payment-verification-list")},directives:[E],styles:[""]}),e})();var y=n("sta1"),b=n("wd/R"),_=n("PSD3"),C=n.n(_);function w(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",0),o["\u0275\u0275elementStart"](2,"div",15),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",15),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",15),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.profileResult.firstname+" "+e.profileResult.lastname," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.profileResult.emailid," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.profileResult.mobilenumber," ")}}function j(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",0),o["\u0275\u0275elementStart"](2,"div",15),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",15),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" UserID: ",e.application.user_id," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ExamID: ",e.application.user_exam_id," ")}}function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",15),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.exam.exam_name," ")}}function P(e,t){1&e&&o["\u0275\u0275element"](0,"i",23)}function V(e,t){1&e&&o["\u0275\u0275element"](0,"i",24)}function A(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.orderInfo.request.pg_response.method," ")}}function O(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.getDate(e.orderInfo.request.pg_response.created_at)," ")}}function R(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1," Matched with exam cost info. "),o["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.orderInfo.exam_fee_reason," ")}}function D(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" ",e.name," => ",e.value," ")}}function k(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275element"](2,"br"),o["\u0275\u0275text"](3),o["\u0275\u0275element"](4,"br"),o["\u0275\u0275text"](5),o["\u0275\u0275template"](6,D,2,2,"div",25),o["\u0275\u0275element"](7,"br"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.orderInfo.request.pg_response.acquirer_data.upi_transaction_id," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" RRN: ",e.orderInfo.request.pg_response.acquirer_data.rrn," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" Auth Code: ",e.orderInfo.request.pg_response.acquirer_data.auth_code," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.transactions),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" Payment ID : ",e.orderInfo.request.pg_response.id," ")}}function T(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",0),o["\u0275\u0275elementStart"](2,"div",15),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",15),o["\u0275\u0275text"](5," Status: "),o["\u0275\u0275template"](6,P,1,0,"i",16),o["\u0275\u0275template"](7,V,1,0,"i",17),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",15),o["\u0275\u0275text"](10," Method: "),o["\u0275\u0275template"](11,A,2,1,"span",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275elementStart"](13,"div",15),o["\u0275\u0275text"](14," Date: "),o["\u0275\u0275template"](15,O,2,1,"span",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",15),o["\u0275\u0275text"](17," Fee rule: "),o["\u0275\u0275template"](18,R,2,0,"span",5),o["\u0275\u0275template"](19,q,2,1,"span",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",15),o["\u0275\u0275text"](21," TX Number: "),o["\u0275\u0275template"](22,k,9,5,"span",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",7),o["\u0275\u0275elementStart"](24,"div",18),o["\u0275\u0275elementStart"](25,"textarea",19),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().exception_reason=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",18),o["\u0275\u0275text"](27," TraxID: "),o["\u0275\u0275elementStart"](28,"input",20),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().exception_txid=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",18),o["\u0275\u0275text"](30," Method: "),o["\u0275\u0275elementStart"](31,"input",21),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().exception_method=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",18),o["\u0275\u0275text"](33," Tx Date: (must be in YYYY-MM-DD HH:mm:ss format e.g. 2021-03-31 16:15:27) "),o["\u0275\u0275elementStart"](34,"input",22),o["\u0275\u0275listener"]("ngModelChange",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().exception_txdate=t})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"div",18),o["\u0275\u0275elementStart"](36,"div",8),o["\u0275\u0275elementStart"](37,"button",12),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.addExceptionAccept(t.orderInfo)})),o["\u0275\u0275text"](38," Authorize/Accept Payment"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" Amount: ",e.orderInfo.exam_fee," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","authorized"==e.orderInfo.payment_status),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","authorized"!=e.orderInfo.payment_status),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.orderInfo.payment_status," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.orderInfo.request&&e.orderInfo.request.pg_response),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",e.orderInfo.request&&e.orderInfo.request.pg_response),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.orderInfo.fee_rule&&e.orderInfo.fee_rule._id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.orderInfo.fee_rule&&!e.orderInfo.fee_rule._id),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.orderInfo.request&&e.orderInfo.request.pg_response&&e.orderInfo.request.pg_response.acquirer_data),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.exception_reason),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.exception_txid),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.exception_method),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.exception_txdate)}}const F=[{path:"",canActivate:[i.e],component:I},{path:":examid/users/:userid",canActivate:[i.e],component:(()=>{class e{constructor(e,t,n,r,a,i){this.activateRoute=e,this.router=t,this.examApi=n,this.alert=r,this.appVeriService=a,this.candidateViewService=i,this.transactions=[]}ngOnInit(){this.activateRoute.params.subscribe(e=>{this.examid=e.examid,this.userid=e.userid,this.getUserStatus(),this.personalDetails(),this.getExam(),this.getOrderInfo(),this.getApplication()})}getApplication(){this.candidateViewService.getApplication({userid:this.userid,examid:this.examid}).pipe(Object(c.a)()).subscribe(e=>{this.application=e})}getOrderInfo(){this.appVeriService.getOrderInfo(this.examid,this.userid).pipe(Object(c.a)()).subscribe(e=>{if(this.orderInfo=e,this.transactions=[],this.orderInfo&&this.orderInfo.request&&this.orderInfo.request.pg_response&&this.orderInfo.request.pg_response.acquirer_data)for(var t in this.orderInfo.request.pg_response.acquirer_data)this.transactions.push({name:t,value:this.orderInfo.request.pg_response.acquirer_data[t]})})}getExam(){this.examApi.getExambyId(this.examid).pipe(Object(c.a)()).subscribe(e=>{this.exam=e})}getUserStatus(){this.candidateViewService.getUserStatus(this.userid,this.examid).pipe(Object(c.a)()).subscribe(e=>{this.userStatus=e,this.currentStatus=this.userStatus.statuscode})}personalDetails(){this.candidateViewService.getPersonalDetailsByUserid(this.userid).pipe(Object(c.a)()).subscribe(e=>{e&&(this.profileResult=e)})}getDate(e){return b(e).format("DD/MM/YYYY hh:mm A")}reject(){if(!this.reject_reason)return this.alert.e("Reject reason is required");C.a.fire({title:"Are you sure?",text:"Payment will be rejected",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, reject it!",cancelButtonText:"No, keep it"}).then(e=>{e.value&&this.doReject()})}approve(){C.a.fire({title:"Are you sure?",text:"Payment will be approved",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, approve it!",cancelButtonText:"No, keep it"}).then(e=>{e.value&&this.doApprove()})}doReject(){this.candidateViewService.rejectPayment({message:this.reject_reason,examid:this.examid,userid:this.userid}).pipe(Object(c.a)()).subscribe(e=>{if("error"==e.status)return this.alert.e(e.message);this.alert.s("Payment rejected"),this.getUserStatus()})}doApprove(){this.candidateViewService.approvePayment({message:this.approval_notes,examid:this.examid,userid:this.userid}).pipe(Object(c.a)()).subscribe(e=>{if("error"==e.status)return this.alert.e(e.message);this.alert.s("Payment approved"),this.getUserStatus()})}closeThis(){this.router.navigate(["admin/payments"])}addExceptionAccept(e){return this.exception_reason?this.exception_txid?this.exception_method?this.exception_txdate?void C.a.fire({title:"Are you sure?",text:"You are trying to approve this payment. This action cant be reversed. you will need to do reject payment and ask the candidate to go throigh the process again",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, do  it!",cancelButtonText:"No"}).then(t=>{t.value&&this.candidateViewService.acceptPayment({id:e._id,reason:this.exception_reason,trxid:this.exception_txid,method:this.exception_method,txdate:this.exception_txdate}).pipe(Object(c.a)()).subscribe(e=>{if("error"==e.status)return this.alert.e(e.message);this.alert.s("Payment accepted"),this.getOrderInfo()})}):this.alert.e("Please enter Tx Date in correct format"):this.alert.e("Please enter Tx Method"):this.alert.e("Please enter Tx ID"):this.alert.e("Please enter reason for exception")}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](a.b),o["\u0275\u0275directiveInject"](y.a),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](i.c),o["\u0275\u0275directiveInject"](i.h))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pay-veri-detail"]],decls:53,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","text-center"],[1,"card-body"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"row",2,"margin-top","20px"],[1,"col-md-6"],["placeholder","approval notes","rows","3",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],["placeholder","rejection reason","rows","3",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"],[1,"col-md-6","text-right"],[1,"btn","btn-info",3,"click"],[1,"col-md-4"],["class","fas fa-check","style","color:green",4,"ngIf"],["class","fas fa-question","style","color:red",4,"ngIf"],[1,"col-md-3"],["placeholder","exception reason","rows","3",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","e.g. 1262364",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","e.g. CASH",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","e.g. 2021-03-31 16:15:27",1,"form-control",3,"ngModel","ngModelChange"],[1,"fas","fa-check",2,"color","green"],[1,"fas","fa-question",2,"color","red"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"h3"),o["\u0275\u0275text"](5,"Exam Payment Verification"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",0),o["\u0275\u0275elementStart"](7,"div",1),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275elementStart"](9,"div",4),o["\u0275\u0275elementStart"](10,"h3"),o["\u0275\u0275text"](11,"Candidate Info"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,w,8,3,"div",5),o["\u0275\u0275template"](13,j,6,2,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",0),o["\u0275\u0275elementStart"](15,"div",1),o["\u0275\u0275elementStart"](16,"div",2),o["\u0275\u0275elementStart"](17,"div",4),o["\u0275\u0275elementStart"](18,"h3"),o["\u0275\u0275text"](19,"Exam Info"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](20,M,3,1,"div",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",0),o["\u0275\u0275elementStart"](22,"div",1),o["\u0275\u0275elementStart"](23,"div",2),o["\u0275\u0275elementStart"](24,"div",4),o["\u0275\u0275elementStart"](25,"h3"),o["\u0275\u0275text"](26,"Payment Info"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](27,T,39,13,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",0),o["\u0275\u0275elementStart"](29,"div",1),o["\u0275\u0275elementStart"](30,"div",2),o["\u0275\u0275elementStart"](31,"div",4),o["\u0275\u0275elementStart"](32,"h3"),o["\u0275\u0275text"](33,"Action:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](34),o["\u0275\u0275elementStart"](35,"div",7),o["\u0275\u0275elementStart"](36,"div",8),o["\u0275\u0275text"](37," Approval notes: "),o["\u0275\u0275elementStart"](38,"textarea",9),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.approval_notes=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](39,"br"),o["\u0275\u0275elementStart"](40,"button",10),o["\u0275\u0275listener"]("click",(function(){return t.approve()})),o["\u0275\u0275text"](41," Approve"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"div",8),o["\u0275\u0275text"](43," Rejection reason: "),o["\u0275\u0275elementStart"](44,"textarea",11),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.reject_reason=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](45,"br"),o["\u0275\u0275elementStart"](46,"div",0),o["\u0275\u0275elementStart"](47,"div",8),o["\u0275\u0275elementStart"](48,"button",12),o["\u0275\u0275listener"]("click",(function(){return t.reject()})),o["\u0275\u0275text"](49," Reject"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](50,"div",13),o["\u0275\u0275elementStart"](51,"button",14),o["\u0275\u0275listener"]("click",(function(){return t.closeThis()})),o["\u0275\u0275text"](52," Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](12),o["\u0275\u0275property"]("ngIf",t.profileResult),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.application),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngIf",t.exam),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngIf",t.orderInfo),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate1"](" Current Status: ",t.currentStatus," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.approval_notes),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.reject_reason))},directives:[r.NgIf,m.c,m.j,m.m,r.NgForOf],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(F)],a.f]}),e})(),Y=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,m.e,i.p,N]]}),e})()}}]);